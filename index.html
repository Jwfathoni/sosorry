<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Maafkan Aku</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #ffe6f0, #ffd1dc, #f8bbff, #c6b9ff);
      background-size: 250% 250%;
      animation: bgMove 14s ease-in-out infinite;
      overflow: hidden;
      padding: 16px;
      position: relative;
    }

    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .page {
      width: 100%;
      max-width: 420px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    .header-image-wrapper {
      width: 75%;
      max-width: 260px;
      aspect-ratio: 1 / 1;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
      background: rgba(255, 255, 255, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #headerImage {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .card {
      width: 100%;
      background: rgba(255, 255, 255, 0.96);
      backdrop-filter: blur(12px);
      padding: 22px 20px 18px;
      border-radius: 18px;
      box-shadow: 0 14px 26px rgba(0, 0, 0, 0.15);
      border: 2px solid rgba(255, 123, 180, 0.85);
      text-align: center;
      transition: opacity 0.3s ease, transform 0.3s ease;
      animation: popIn 0.6s ease-out both;
    }

    @keyframes popIn {
      0% { opacity: 0; transform: translateY(16px) scale(0.96); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }

    h1 {
      margin: 4px 0 12px;
      font-size: 1.6rem;
      font-weight: 700;
    }

    p {
      margin: 8px 0;
      color: #444;
      line-height: 1.55;
      font-size: 0.98rem;
      text-align: justify;
    }

    .fade-text {
      animation: fadeUp 0.6s ease-out;
    }

    @keyframes fadeUp {
      0% { opacity: 0; transform: translateY(8px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    .buttons {
      margin-top: 18px;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    button {
      border: none;
      cursor: pointer;
      font-weight: 600;
      border-radius: 999px;
      padding: 11px 20px;
      font-size: 0.95rem;
      transition:
        transform 0.18s ease,
        box-shadow 0.18s ease,
        background 0.18s ease,
        color 0.18s ease,
        opacity 0.18s ease;
    }

    #nextBtn {
      width: 100%;
      margin-top: 18px;
      background: #ff7bb4;
      color: white;
      box-shadow: 0 4px 12px rgba(255, 123, 180, 0.6);
      opacity: 0;
      pointer-events: none;
      transform: translateY(6px);
    }

    #nextBtn.show {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    #nextBtn:active {
      transform: scale(0.97);
      box-shadow: 0 2px 8px rgba(255, 123, 180, 0.6);
    }

    #noBtn {
      background: #eeeeee;
      color: #333;
    }

    #noBtn:hover {
      transform: translateY(-1px);
      box-shadow: 0 3px 9px rgba(0,0,0,0.12);
    }

    #yesWrapper {
      display: inline-block;
      transition: transform 0.3s ease;
      transform-origin: center center;
    }

    #yesBtn {
      background: #ff5fa2;
      color: white;
      box-shadow: 0 4px 12px rgba(255, 95, 162, 0.7);
      animation: yesPulse 1.8s ease-in-out infinite;
    }

    @keyframes yesPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.04); }
      100% { transform: scale(1); }
    }

    #yesBtn:hover {
      transform: translateY(-1px) scale(1.02);
      box-shadow: 0 6px 16px rgba(255, 95, 162, 0.9);
    }

    .question-text {
      margin-top: 14px;
      margin-bottom: 4px;
      font-size: 0.95rem;
      text-align: center;
    }

    .hidden-card {
      opacity: 0;
      pointer-events: none;
      transform: scale(0.94);
    }

    .full-yes {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #ffe6f0, #ffd1dc, #f8bbff);
      z-index: 9999;
      padding: 16px;
    }

    .full-yes-inner {
      display: flex;
      flex-direction: column;
      gap: 14px;
      align-items: center;
    }

    .particle {
      position: absolute;
      font-size: 1.2rem;
      animation: floatUp 2s ease-out forwards;
      pointer-events: none;
      opacity: 0.9;
    }

    @keyframes floatUp {
      0% {
        transform: translateY(0) scale(0.7);
        opacity: 0;
      }
      15% { opacity: 1; }
      100% {
        transform: translateY(-70px) scale(1.2);
        opacity: 0;
      }
    }

    /* confetti */
    #confettiLayer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 9998;
    }

    .confetti {
      position: absolute;
      top: -10px;
      width: 8px;
      height: 14px;
      opacity: 0.9;
      animation: confettiFall 2.5s linear forwards;
    }

    @keyframes confettiFall {
      0% {
        transform: translateY(0) rotateZ(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(110vh) rotateZ(360deg);
        opacity: 0;
      }
    }

    .wa-button,
    .wa-button-overlay {
      display: inline-block;
      padding: 11px 22px;
      border-radius: 999px;
      background: #25D366;
      color: white;
      font-weight: 600;
      text-decoration: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      font-size: 0.95rem;
      transition: transform 0.18s ease, box-shadow 0.18s ease, opacity 0.18s ease;
    }

    .wa-button:hover,
    .wa-button-overlay:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
    }

    .wa-container {
      margin-top: 16px;
      display: none;
    }
  </style>
</head>
<body>

  <div id="confettiLayer"></div>

  <div class="page">
    <div class="header-image-wrapper">
      <img id="headerImage" src="gambar/1.png" alt="gambar judul">
    </div>

    <div class="card" id="card">
      <h1 id="titleText">Maafkan Aku</h1>

      <div id="stepContent"></div>

      <div id="questionSection" style="display:none;">
        <p class="question-text fade-text">
          Kamu mau maafin aku tidak? üôà
        </p>
        <div class="buttons">
          <button id="noBtn">Tidak üò†</button>
          <span id="yesWrapper">
            <button id="yesBtn">Iya, aku maafin ü§ç</button>
          </span>
        </div>
        <div class="wa-container" id="waContainer">
          <a
            href="https://wa.me/6287820678698?text=hallo"
            target="_blank"
            rel="noopener noreferrer"
            class="wa-button"
          >
            Chat aku di WhatsApp
          </a>
        </div>
      </div>

      <button id="nextBtn">Selanjutnya</button>
    </div>
  </div>

  <div id="fullYesContainer" class="full-yes" style="display:none;">
    <div class="full-yes-inner">
      <button id="bigYesBtn" style="
        border:none;
        cursor:pointer;
        border-radius:40px;
        padding:22px 26px;
        font-size:1.4rem;
        font-weight:700;
        background:#ff5fa2;
        color:white;
        box-shadow:0 10px 30px rgba(0,0,0,0.25);
        max-width:90%;
        text-align:center;
      ">
        Oke, aku maafin kamu ü§ç
      </button>
      <div class="wa-container" id="waOverlayContainer">
        <a
          href="https://wa.me/6287820678698?text=hallo"
          target="_blank"
          rel="noopener noreferrer"
          class="wa-button-overlay"
        >
          Chat aku di WhatsApp
        </a>
      </div>
    </div>
  </div>

  <script>
    const stepContent = document.getElementById('stepContent');
    const questionSection = document.getElementById('questionSection');
    const nextBtn = document.getElementById('nextBtn');

    const titleEl = document.getElementById('titleText');
    const headerImg = document.getElementById('headerImage');

    const noBtn = document.getElementById('noBtn');
    const yesWrapper = document.getElementById('yesWrapper');
    const yesBtn = document.getElementById('yesBtn');
    const card = document.getElementById('card');
    const fullYesContainer = document.getElementById('fullYesContainer');
    const bigYesBtn = document.getElementById('bigYesBtn');

    const waContainer = document.getElementById('waContainer');
    const waOverlayContainer = document.getElementById('waOverlayContainer');

    const confettiLayer = document.getElementById('confettiLayer');

    // musik
    const bgMusic = new Audio("musik.mp3");
    bgMusic.loop = true;
    let musicStarted = false;

    function startMusic() {
      if (musicStarted) return;
      musicStarted = true;
      bgMusic.volume = 0.7;
      bgMusic.play().catch(() => {});
    }

    window.addEventListener("load", startMusic);
    document.body.addEventListener("click", startMusic, { once: true });

    // teks paragraf
    const steps = [
      "Aku ingin minta maaf, bukan karena seharusnya aku minta maaf, tapi karena aku benar-benar sadar kalau aku sudah melakukan kesalahan yang besar.",
      "Kesalahan yang tidak cuma bikin kamu kecewa, tapi juga bikin aku kecewa sama diriku sendiri. Aku sering mikir ulang tentang hal-hal yang terjadi dan sadar betapa fatalnya yang aku lakukan waktu itu.",
      "Aku tidak bisa balik ke masa lalu buat benerin semuanya. Tapi setiap hari aku coba jadi orang yang lebih baik, bukan untuk keliatan baik, tapi karena aku tidak mau kesalahan itu terus nempel di diri aku selamanya.",
      "Bersama kamu, aku pernah merasa jadi versi terbaik dari diriku sendiri. Kamu bikin aku paham banyak hal tentang hidup, tentang cinta, dan tentang cara memperlakukan seseorang.",
      "Mungkin sekarang aku tidak punya kesempatan lagi. Mungkin pintunya sudah tertutup, dan kalau itu pilihanmu, aku terima.",
      "Tapi kalau pun tidak bisa kembali seperti dulu, setidaknya izinkan aku tetap jadi teman. Teman yang menghargai kamu tanpa nuntut apa-apa dan tanpa nyusahin kamu. Terima kasih sudah pernah bikin aku jadi seseorang yang lebih baik, bahkan lewat luka dan penyesalan yang aku sendiri ciptakan."
    ];

    // judul per step + judul akhir
    const titles = [
      "Aku Mengakui Kesalahanku",
      "Penyesalanku",
      "Usaha Untuk Jadi Lebih Baik",
      "Bersama Kamu Aku Lebih Baik",
      "Tentang Kesempatan Kita",
      "Jika Kita Hanya Bisa Jadi Teman",
      "Maafkan Aku"
    ];

    // gambar per step (1-7)
    const images = [
      "gambar/1.png",
      "gambar/2.png",
      "gambar/3.png",
      "gambar/4.png",
      "gambar/5.png",
      "gambar/6.png",
      "gambar/7.png"
    ];

    let currentStep = 0;
    let nextTimer = null;

    function setHeaderForStep(index) {
      titleEl.textContent = titles[index] || "Maafkan Aku";
      headerImg.src = images[index] || images[0];
    }

    function showStep(index) {
      questionSection.style.display = "none";
      stepContent.innerHTML = "";
      setHeaderForStep(index);

      const p = document.createElement("p");
      p.className = "fade-text";
      p.textContent = steps[index];
      stepContent.appendChild(p);

      nextBtn.classList.remove("show");
      nextBtn.disabled = true;

      if (nextTimer) clearTimeout(nextTimer);
      nextTimer = setTimeout(() => {
        nextBtn.classList.add("show");
        nextBtn.disabled = false;
      }, 5000); // 5 detik
    }

    function showQuestion() {
      stepContent.innerHTML = "";
      questionSection.style.display = "block";
      nextBtn.classList.remove("show");
      nextBtn.disabled = true;

      setHeaderForStep(6); // judul + gambar ke-7
    }

    nextBtn.addEventListener('click', () => {
      startMusic();
      if (currentStep < steps.length - 1) {
        currentStep += 1;
        showStep(currentStep);
      } else {
        showQuestion();
      }
    });

    // confetti
    function launchConfetti() {
      const colors = ["#ff5fa2", "#ffd166", "#06d6a0", "#118ab2", "#ffffff"];
      const amount = 120;

      for (let i = 0; i < amount; i++) {
        const conf = document.createElement("div");
        conf.className = "confetti";
        const size = 6 + Math.random() * 6;
        conf.style.width = size + "px";
        conf.style.height = (size * 1.6) + "px";
        conf.style.left = Math.random() * 100 + "vw";
        conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        conf.style.animationDelay = (Math.random() * 1.5) + "s";

        confettiLayer.appendChild(conf);
        conf.addEventListener("animationend", () => conf.remove());
      }
    }

    function showWhatsAppButtons() {
      if (waContainer) {
        waContainer.style.display = "block";
      }
      if (waOverlayContainer) {
        waOverlayContainer.style.display = "block";
      }
    }

    function handleYes() {
      startMusic();
      launchConfetti();
      showWhatsAppButtons();
    }

    let yesScale = 1;

    noBtn.addEventListener('click', () => {
      startMusic();
      yesScale *= 1.35;
      yesWrapper.style.transform = `scale(${yesScale})`;

      if (yesScale > 1.5 && yesScale <= 2.5) {
        noBtn.textContent = "Yakin tidak? üò≥";
      } else if (yesScale > 2.5 && yesScale <= 3.5) {
        noBtn.textContent = "Plis jangan gitu ü•∫";
      } else if (yesScale > 3.5 && yesScale <= 4.5) {
        noBtn.textContent = "Tekan 'Iya' dong ü•π";
      }

      if (yesScale > 4.5) {
        fullYesContainer.style.display = 'flex';
        card.classList.add('hidden-card');
        noBtn.disabled = true;
      }
    });

    yesBtn.addEventListener('click', () => {
      handleYes();
      alert("Terima kasih sudah maafin aku ü§ç");
    });

    bigYesBtn.addEventListener('click', () => {
      handleYes();
      alert("Aku janji bakal terus berusaha jadi lebih baik setiap harinya ü´∂");
    });

    // mulai dari step pertama
    showStep(currentStep);
  </script>
</body>
</html>
